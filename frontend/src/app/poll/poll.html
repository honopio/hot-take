<div class="max-w-6xl mx-auto my-10 sm:border rounded-xl p-3 sm:p-8">
  <!-- header -->
  <button
    class="btn bg-transparent flex items-center gap-2 hover:bg-primary/80 transition-colors mb-6"
    routerLink="/"
  >
    <mat-icon fontIcon="arrow_back"></mat-icon>
    Back
  </button>
  @if (this.successMessage) {
  <div
    class="maw-w-2xl flex items-center justify-center p-4 mb-4 border border-secondary rounded-lg bg-secondary/30 text-xl"
    role="alert"
  >
    <mat-icon fontIcon="check_circle" class="mr-2" />
    <div>{{this.successMessage}}</div>
  </div>
  }
  <div class="mx-auto mb-2 sm:mb-8 flex flex-col items-center">
    <div class="relative inline-block w-max">
      <span
        class="absolute left-0 right-0 bottom-5 h-3 sm:h-5 bg-primary/60"
      ></span>
      <h2 class="text-center relative z-10 px-2">{{ pollData()?.title }}</h2>
    </div>
  </div>

  <!-- poll form -->
  <form #voteForm="ngForm" (ngSubmit)="submitVote()">
    <div class="space-y-4 mb-6">
      @for (option of pollData()?.options; track option.optionId) {
      <label
        class="flex items-center p-4 bg-background border rounded-lg cursor-pointer transition-colors"
        [ngClass]="{
          'border-primary border-2': selectedOption === option.optionId,
          'border-gray-200': selectedOption !== option.optionId
        }"
      >
        <input
          type="radio"
          name="pollOption"
          [value]="option.optionId"
          class="w-5 h-5 mr-4 accent-primary"
          [(ngModel)]="selectedOption"
          required
        />
        <span class="text-lg">{{ option.text }}</span>
      </label>
      }
    </div>

    <div class="flex flex-row gap-4 justify-center items-center">
      <button type="submit" class="btn font-bold flex hover:bg-primary/70">
        <mat-icon fontIcon="poll" class="mr-2"></mat-icon>
        Submit Vote
      </button>
    </div>
    @if (voteForm.submitted && !voteForm.valid) {
    <div
      class="mt-4 text-sm text-primary flex items-center justify-center gap-1"
    >
      <mat-icon fontIcon="info" class="text-sm"></mat-icon>
      Please select an option
    </div>
    }
  </form>
</div>
